/* =========================================================
   üéÑ Secret Santa ‚Äî Interface fluide, fixe et responsive
   ========================================================= */

/* ------------------ Th√®me (variables OKLCH) ------------------ */
:root {
    --surface: oklch(0.24 0.03 210 / 0.52);
    --surface-strong: oklch(0.22 0.04 210 / 0.68);
    --edge: oklch(0.4 0.02 210 / 0.2);
    --edge-strong: oklch(0.7 0.02 210 / 0.35);

    --text: oklch(0.94 0.02 230);
    --muted: oklch(0.76 0.03 230);

    --brand: oklch(0.6 0.2 280);
    --ring: oklch(0.72 0.12 280 / 0.35);

    --shell-pad: 16px;
    --mobile-bar-h: 72px;
}

/* ------------------ Reset de base ------------------ */
*,
*::before,
*::after {
    box-sizing: border-box;
}

html,
body,
#root {
    height: 100%;
    background: transparent !important;
}

body {
    margin: 0;
    overflow: hidden; /* üö´ pas de scroll global */
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
        Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
    color: var(--text);
}

/* ------------------ Calque de fond ------------------ */
.bg-layer {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    overflow: hidden;
}

/* ------------------ Conteneur principal ------------------ */
.app {
    position: relative;
    isolation: isolate;
    display: grid;
    place-items: center;
    padding: var(--shell-pad);
}
.app > *:not(.bg-layer) {
    position: relative;
    z-index: 1;
}

/* ------------------ Layout principal ------------------ */
.shell {
    height: 100svh; /* ‚úÖ hauteur fixe de l‚Äô√©cran */
    padding-bottom: env(safe-area-inset-bottom);
    display: flex;
    flex-direction: column;
}
.header {
    flex: 0 0 auto;
    padding: 10px;
}
.header h1 {
    margin: 0;
    font-size: clamp(20px, 3.2vw, 28px);
    text-align: center;
}

/* Zone principale (grille 2 colonnes sur grand √©cran) */
.grid {
    flex: 1 1 auto;
    min-height: 0;
}

@media (min-width: 760px) {
    .grid {
        display: grid;
        grid-template-columns: minmax(384px, 1fr) minmax(384px, 1fr);
        gap: 32px; /* un peu plus d‚Äôespace entre les colonnes */
        align-items: stretch;
        justify-content: center;
        max-width: 1100px; /* ‚úÖ largeur max √©l√©gante sur desktop */
        width: 100%;
        margin: 0 auto;
        min-height: 0;
        padding: 30px;
    }
}

/* ------------------ Carte (verre d√©poli) ------------------ */
.card {
    background: linear-gradient(
        180deg,
        color-mix(in oklch, var(--surface), transparent 0%),
        color-mix(in oklch, var(--surface-strong), transparent 0%)
    );
    border: 1px solid var(--edge);
    border-radius: 16px;
    box-shadow: 0 1px 0 var(--edge-strong) inset,
        0 10px 30px oklch(0 0 0 / 0.25);
    backdrop-filter: blur(10px) saturate(1.05);
    -webkit-backdrop-filter: blur(10px) saturate(1.05);

    display: grid;
    grid-template-rows: max-content 1fr max-content;
    height: 100%;
    min-height: 0;
    height: 60vh;
    min-width: 50svh;
    padding: 16px;
    gap: 12px;
}
@media (max-width: 759px) {
    .card {
        max-height: 72svh;
        min-width: 40svh;
    }
}

.section-title {
    margin: 0;
    font-weight: 600;
    font-size: 15px;
    color: var(--muted);
}

/* ------------------ Corps des cartes ------------------ */
.card-body {
    min-height: 0;
    overflow: hidden;
}
/* 
.list {
    overflow-y: scroll;
} */

/* ------------------ Structure ListOfPeople ------------------ */
.card-body > .list-of-people {
    display: grid;
    grid-template-rows: max-content minmax(0, 1fr) max-content; /* form / liste / actions */
    min-height: 100%;
    min-width: 0;
}

/* Zone d√©filante de la liste */
.card-body > .list-of-people .people-scroll {
    min-height: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
}

/* En mobile, on garde un espace sous la liste pour la barre fixe */
@media (max-width: 759px) {
    .card-body > .list-of-people .people-scroll {
        padding-bottom: calc(var(--mobile-bar-h) + 16px);
    }
}

/* ------------------ Formulaire ------------------ */
.form {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 10px;
}
.input {
    background: transparent;
    border: 1px solid var(--edge);
    color: var(--text);
    border-radius: 12px;
    padding: 10px 12px;
    outline: none;
    transition: border-color 160ms ease, box-shadow 160ms ease;
}
.input::placeholder {
    color: color-mix(in oklch, var(--muted), transparent 30%);
}
.input:focus-visible {
    border-color: var(--brand);
}

/* ------------------ Boutons ------------------ */
.btn {
    border: 1px solid color-mix(in oklch, var(--brand), white 20%);
    background: linear-gradient(
        141deg,
        color-mix(in oklch, oklch(0.5 0.16 150.33), white 8%),
        oklch(0.29 0.09 280.46)
    );
    color: white;
    border-radius: 12px;
    padding: 10px 14px;
    font-weight: 600;
    cursor: pointer;
    /* white-space: nowrap; */
    transition: transform 120ms ease, filter 120ms ease, box-shadow 160ms ease;
}
.btn:hover {
    filter: brightness(1.03);
    transform: translateY(-1px);
}
.btn:active {
    transform: translateY(0);
}
.btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 6px var(--ring);
}
.btn--secondary {
    background: linear-gradient(
        141deg,
        color-mix(in oklch, oklch(0.32 0.11 40.19), white 8%),
        oklch(0.29 0.09 280.46)
    );
    border: 1px solid var(--ring);
    color: var(--text);
}
.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    filter: none;
}

/* ------------------ Barre d‚Äôactions ------------------ */
.actions {
    display: grid;
    gap: 10px;
}

/* ‚úÖ Desktop : sticky (reste visible dans la carte) */
@media (min-width: 760px) {
    .actions--mobile-fixed {
        position: sticky;
        bottom: 0;
        margin-top: 12px;
        background: transparent;
        border: 0;
        box-shadow: none;
        height: auto;
        padding: 0;
        display: flex;
        gap: 12px;
        justify-content: flex-start;
    }
    .actions--mobile-fixed .btn {
        width: auto;
    }
}

/* ‚úÖ Mobile : fixe en bas de l‚Äô√©cran */
@media (max-width: 759px) {
    .actions--mobile-fixed {
        position: fixed;
        left: var(--shell-pad);
        right: var(--shell-pad);
        bottom: calc(env(safe-area-inset-bottom) - 100px);
        z-index: 9999;

        background: linear-gradient(
            180deg,
            color-mix(in oklch, var(--surface), transparent 0%),
            color-mix(in oklch, var(--surface-strong), transparent 0%)
        );
        border: 1px solid var(--edge);
        border-radius: 14px;
        padding: 60px 10px;
        backdrop-filter: blur(8px) saturate(1.05);
        -webkit-backdrop-filter: blur(8px) saturate(1.05);
        box-shadow: 0 10px 30px oklch(0 0 0 / 0.35);

        height: var(--mobile-bar-h);
        align-content: center;
    }
    .actions--mobile-fixed .btn {
        width: 100%;
    }
}

/* Pied de section : 3 boutons √©gaux (desktop par d√©faut) */
.actions-footer {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
}

/* Les boutons prennent toute la cellule */
.actions-footer .btn {
    width: 100%;
}

/* --- VERSION MOBILE --- */
@media (max-width: 759px) {
    .actions-footer {
        /* 2 lignes :
       - la 1 ≥·µâ pour le tirage (100%)
       - la 2·µâ divis√©e en 2 colonnes √©gales pour les autres boutons */
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
            "draw draw"
            "clear results";
    }

    .actions-footer .btn:nth-child(1) {
        grid-area: draw;
    }
    .actions-footer .btn:nth-child(2) {
        grid-area: clear;
    }
    .actions-footer .btn:nth-child(3) {
        grid-area: results;
    }
}

/* En desktop la barre est en bas de la carte (sticky via .actions--mobile-fixed) */
/* En mobile, .actions--mobile-fixed garde le comportement ‚Äúbarre fixe √©cran‚Äù d√©j√† en place */

/* ------------------ R√©sultats ------------------ */
.results-scroll {
    overflow-y: auto;
    /* -webkit-overflow-scrolling: touch; */
    min-height: 0;
    height: 100%;
}

/* Panneau desktop (colonne droite) */
.results-panel {
    display: none;
}
@media (min-width: 760px) {
    .results-panel {
        display: flex;
        flex-direction: column;
        min-height: 0;
    }
}

/* ------------------ Modale mobile (r√©sultats) ------------------ */
.modal-backdrop {
    position: fixed;
    inset: 0;
    z-index: 2147483647;
    background: oklch(0.1 0.02 230 / 0.65);
    display: grid;
    place-items: center;
    padding: 16px;
    overflow: hidden;
}
.modal {
    width: 100%;
    max-width: 520px;
    max-height: 90svh;
    overflow: hidden;
    background: linear-gradient(
        180deg,
        color-mix(in oklch, var(--surface), transparent 0%),
        color-mix(in oklch, var(--surface-strong), transparent 0%)
    );
    border: 1px solid var(--edge);
    border-radius: 16px;
    backdrop-filter: blur(12px) saturate(1.05);
    -webkit-backdrop-filter: blur(12px) saturate(1.05);
    box-shadow: 0 20px 80px oklch(0 0 0 / 0.55);
    display: grid;
    grid-template-rows: max-content 1fr max-content;
}
.modal-header,
.modal-footer {
    padding: 12px 16px;
    border-bottom: 1px solid var(--edge);
}
.modal-footer {
    border-bottom: 0;
    border-top: 1px solid var(--edge);
}
.modal-title {
    margin: 0;
    font-size: 16px;
    color: var(--text);
}
.modal-body {
    padding: 12px 16px;
    min-height: 0;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}
.icon-btn {
    background: transparent;
    border: 1px solid var(--edge);
    border-radius: 10px;
    padding: 6px 10px;
    color: var(--text);
    cursor: pointer;
}
.icon-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 6px var(--ring);
}

body.modal-open {
    overflow: hidden !important;
    touch-action: none;
}

/* ------------------ Responsive petites largeurs ------------------ */
@media (max-width: 520px) {
    .form {
        grid-template-columns: 1fr;
    }
    .btn {
        width: 100%;
    }
}

/* ------------------ Effet de grain subtil ------------------ */
.bg-oklch::after {
    content: "";
    position: absolute;
    inset: -10%;
    pointer-events: none;
    opacity: 0.16;
    mix-blend-mode: soft-light;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><filter id="n"><feTurbulence baseFrequency="0.9" numOctaves="4" stitchTiles="stitch" type="fractalNoise"/></filter><rect width="120" height="120" filter="url(%23n)"/></svg>');
}

/* ------------------ Perf flocons ------------------ */
.flake {
    will-change: transform;
    transform: translateZ(0);
}

.line {
    /* color: rgb(217, 255, 0); */
    background: var(--edge-strong);
    height: 1px;
    border: none;
    margin-top: 16px;
}
